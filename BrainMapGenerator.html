<!DOCTYPE html>
<html>
	<head>
		<title>BrainMap Generator</title>
		<link rel="stylesheet" type="text/css" href="WebSystem.css">
	</head>

	<body onload="loadFirst()">
		<div class="heading">
			<h1>Brain Map</h1>
			<h5>DHANANI, MALONZO, SANTOS</h5>
			<h2 id= "currState"> N/A </h2>

			Row Number: <p id="row_num"></p>

			<br /> 

			<input type="file" id="csvFileInput" onchange="handleFiles(this.files)"
	            accept=".csv">

	        <br>
	        <br>
	        <br>

			<button type="button" onclick="setcurr_Emotion(0)" id="pm_int">PM interest</button>
			<button type="button" onclick="setcurr_Emotion(1)" id="pm_frus">PM frustration</button>
			<button type="button" onclick="setcurr_Emotion(2)" id="pm_stress">PM stress</button>

			<button type="button" onclick="setcurr_Emotion(3)" id="msp_int">MSP interest</button>
			<button type="button" onclick="setcurr_Emotion(4)" id="msp_frus">MSP frustration</button>
			<button type="button" onclick="setcurr_Emotion(5)" id="msp_stress">MSP stress</button>

			<br />
			<button type="button" onclick="prev()" id="prev">PREV</button>
			<button type="button" onclick="next()" id="next">NEXT</button>

			<br>
			<br>
			<br>
			<img src="brainGradient.png" style="width:300px;height:30px;">

		</div>

		<div class="divRight">
			<div id = "divRightContent">
				<h1> Brain Value Ranges</h1>
				<h4>PM</h4>

				<table>
					<tr>
						<th>AF3</th>
					</tr>
	  				<tr>
	  					<td> LRange:</td>
	  					<td> <input type="text" id = "PM_AF3_LRange"></td>
	  					<td> URange:</td>
	  					<td> <input type="text" id = "PM_AF3_URange"></td>
	  				</tr>

	  				<tr>
						<th>T7</th>
					</tr>
	  				<tr>
	  					<td> LRange:</td>
	  					<td> <input type="text" id = "PM_T7_LRange"></td>
	  					<td> URange:</td>
	  					<td> <input type="text" id = "PM_T7_URange"></td>
	  				</tr>

	  				<tr>
						<th>PZ</th>
					</tr>
	  				<tr>
	  					<td> LRange:</td>
	  					<td> <input type="text" id = "PM_PZ_LRange"></td>
	  					<td> URange:</td>
	  					<td> <input type="text" id = "PM_PZ_URange"></td>
	  				</tr>

	  				<tr>
						<th>T8</th>
					</tr>
	  				<tr>
	  					<td> LRange:</td>
	  					<td> <input type="text" id = "PM_T8_LRange"></td>
	  					<td> URange:</td>
	  					<td> <input type="text" id = "PM_T8_URange"></td>
	  				</tr>

	  				<tr>
						<th>AF4</th>
					</tr>
	  				<tr>
	  					<td> LRange:</td>
	  					<td> <input type="text" id = "PM_AF4_LRange"></td>
	  					<td> URange:</td>
	  					<td> <input type="text" id = "PM_AF4_URange"></td>
	  				</tr>
	  			</table>

	  			<br>
	  			<br>


	  			<h4>MSP</h4>

				<table>
					<tr>
						<th>AF3</th>
					</tr>
	  				<tr>
	  					<td> LRange:</td>
	  					<td> <input type="text" id = "MSP_AF3_LRange"></td>
	  					<td> URange:</td>
	  					<td> <input type="text" id = "MSP_AF3_URange"></td>
	  				</tr>

	  				<tr>
						<th>T7</th>
					</tr>
	  				<tr>
	  					<td> LRange:</td>
	  					<td> <input type="text" id = "MSP_T7_LRange"></td>
	  					<td> URange:</td>
	  					<td> <input type="text" id = "MSP_T7_URange"></td>
	  				</tr>

	  				<tr>
						<th>PZ</th>
					</tr>
	  				<tr>
	  					<td> LRange:</td>
	  					<td> <input type="text" id = "MSP_PZ_LRange"></td>
	  					<td> URange:</td>
	  					<td> <input type="text" id = "MSP_PZ_URange"></td>
	  				</tr>

	  				<tr>
						<th>T8</th>
					</tr>
	  				<tr>
	  					<td> LRange:</td>
	  					<td> <input type="text" id = "MSP_T8_LRange"></td>
	  					<td> URange:</td>
	  					<td> <input type="text" id = "MSP_T8_URange"></td>
	  				</tr>

	  				<tr>
						<th>AF4</th>
					</tr>
	  				<tr>
	  					<td> LRange:</td>
	  					<td> <input type="text" id = "MSP_AF4_LRange"></td>
	  					<td> URange:</td>
	  					<td> <input type="text" id = "MSP_AF4_URange"></td>
	  				</tr>
	  			</table>
	  			<br>
	  			<br>
	  			<button type="button" onclick="getLURangeTB()">Update Ranges</button>
	  			<br>
	  			<br>
	  		</div>
		</div>

	<div class = "bm-container">	
		<div class="brainmap">
			<h4>ALPHA</h4>
			<div class = "rows">
				<div class="first">
					<p style="margin-bottom: 2px">AF3</p>
					<div class="channel" id = "A_AF3_channel"></div>
				</div>
				<div class="second">
					<p style="margin-bottom: 2px">AF4</p>
					<div class="channel" id = "A_AF4_channel"></div>
				</div>
			</div>
			<br >
			<br >
			<div class = "rows">
				<div class="first">
					<p style="margin-bottom: 2px">Ts7 </p>
					<div class="channel" id = "A_T7_channel"></div>
				</div>
				<div class="second">
					<p style="margin-bottom: 2px">Ts8 </p>
					<div class="channel" id = "A_T8_channel"></div>
				</div>
			</div>
			<br />
			<div class = "rows">
				<div class="first">
					<p style="margin-bottom: 2px">Pz</p>
					<div class="last_channel" id = "A_PZ_channel"></div>
				</div>
			</div>
		</div>
		<div class="brainmap">
			<h5>BETA LOW</h5>
			<div class = "rows">
				<div class="first">
					<p style="margin-bottom: 2px">AF3</p>
					<div class="channel" id = "BL_AF3_channel"></div>
				</div>
				<div class="second">
					<p style="margin-bottom: 2px">AF4</p>
					<div class="channel" id = "BL_AF4_channel"></div>
				</div>
			</div>
			<br >
			<br >
			<div class = "rows">
				<div class="first">
					<p style="margin-bottom: 2px">Ts7 </p>
					<div class="channel" id = "BL_T7_channel"></div>
				</div>
				<div class="second">
					<p style="margin-bottom: 2px">Ts8 </p>
					<div class="channel" id = "BL_T8_channel"></div>
				</div>
			</div>
			<br />
			<div class = "rows">
				<div class="first">
					<p style="margin-bottom: 2px">Pz</p>
					<div class="last_channel" id = "BL_PZ_channel"></div>
				</div>
			</div>
		</div>
		<div class="brainmap">
			<h5>BETA HIGH</h5>
				<div class = "rows">
					<div class="first">
						<p style="margin-bottom: 2px">AF3</p>
						<div class="channel" id = "BH_AF3_channel"></div>
					</div>
					<div class="second">
						<p style="margin-bottom: 2px">AF4</p>
						<div class="channel" id = "BH_AF4_channel"></div>
					</div>
				</div>
				<br >
				<br >
				<div class = "rows">
					<div class="first">
						<p style="margin-bottom: 2px">Ts7 </p>
						<div class="channel" id = "BH_T7_channel"></div>
					</div>
					<div class="second">
						<p style="margin-bottom: 2px">Ts8 </p>
						<div class="channel" id = "BH_T8_channel"></div>
					</div>
				</div>
				<br />
				<div class = "rows">
					<div class="first">
						<p style="margin-bottom: 2px">Pz</p>
						<div class="last_channel" id = "BH_PZ_channel"></div>
					</div>
				</div>
			</div>
		<div class="brainmap">
			<h4>GAMMA</h4>
			<div class = "rows">
				<div class="first">
					<p style="margin-bottom: 2px">AF3</p>
					<div class="channel" id = "G_AF3_channel"></div>
				</div>
				<div class="second">
					<p style="margin-bottom: 2px">AF4</p>
					<div class="channel" id = "G_AF4_channel"></div>
				</div>
			</div>
			<br >
			<br >
			<div class = "rows">
				<div class="first">
					<p style="margin-bottom: 2px">Ts7 </p>
					<div class="channel" id = "G_T7_channel"></div>
				</div>
				<div class="second">
					<p style="margin-bottom: 2px">Ts8 </p>
					<div class="channel" id = "G_T8_channel"></div>
				</div>
			</div>
			<br />
			<div class = "rows">
				<div class="first">
					<p style="margin-bottom: 2px">Pz</p>
					<div class="last_channel" id = "G_PZ_channel"></div>
				</div>
			</div>
		</div>
		<img src="brainMap.png" style="width:200px;height:280px;">
	</div>

	            
	<script>
			/************* DEFAULT SETTINGS *************/
			var total_Col = 52;
			var col_int = 49;
			var col_frus = 50;
			var col_stress = 51;

			var curr_row = 0; //curr row in data

			/************* EMOTION RANGE *************/
			var PM_AF3_LRange = -0.7634826309316228;
			var PM_AF3_URange = 0.9600737884393159;
			var PM_T7_LRange = -0.7634823695217303;
			var PM_T7_URange = 0.9550195116501001;
			var PM_PZ_LRange = -0.7634822001755437;
			var PM_PZ_URange = 0.9658860880654223;
			var PM_T8_LRange = -0.7636010971152588;
			var PM_T8_URange = -0.7636010971152588;
			var PM_AF4_LRange = 0.7634819542787937;
			var PM_AF4_URange = 0.9813820205603965;

			var MSP_AF3_LRange = -0.7610324343801486;
			var MSP_AF3_URange = 1.3177609305252609;
			var MSP_T7_LRange = -0.7610321496413504;
			var MSP_T7_URange = 1.329058612050384;
			var MSP_PZ_LRange = -0.7610321653686634;
			var MSP_PZ_URange = 1.316284493552668;
			var MSP_T8_LRange = -0.7610318313428618;
			var MSP_T8_URange = 1.330766354861162;
			var MSP_AF4_LRange = -0.7611503814564448;
			var MSP_AF4_URange = -0.7611503814564448;

			/*
			0	=	AF3
			1	=	T7
			2	=	PZ
			3	=	T8
			4	=	AF4
			*/

			/************* CUR EMOTION *************/
			var curr_Emotion = 0; 	// change to -1 later
			var curr_Lines = [];

			/*
			-1	=	no emotion
			0	=	PM interest
			1	=	PM frustration
			2	=	PM stress
			3	=	MSP interest
			4	=	MSP frustration
			5	=	MSP stress
			*/

			/************* CSV CONTENT *************/
			var lines = [];

			/************* COMPUTE COLOR *************/
			function isPM(){
				if(curr_Emotion == 0 || curr_Emotion == 1 || curr_Emotion == 2)
					return true;
				return false;
			}

			function getURange(brain_node){
				if(isPM()){ //PM
					if(brain_node == 0) //AF3
						return PM_AF3_URange;
					else if(brain_node == 1) //T7
						return PM_T7_URange;
					else if(brain_node == 2) //PZ
						return PM_PZ_URange;
					else if(brain_node == 3) //T8
						return PM_T8_URange;
					else if(brain_node == 4) //AF4
						return PM_AF4_URange;
				}
				else{
					if(brain_node == 0) //AF3
						return MSP_AF3_URange;
					else if(brain_node == 1) //T7
						return MSP_T7_URange;
					else if(brain_node == 2) //PZ
						return MSP_PZ_URange;
					else if(brain_node == 3) //T8
						return MSP_T8_URange;
					else if(brain_node == 4) //AF4
						return MSP_AF4_URange;
				}
			}

			function getLRange(brain_node){
				if(isPM()){ //PM
					if(brain_node == 0) //AF3
						return PM_AF3_LRange;
					else if(brain_node == 1) //T7
						return PM_T7_LRange;
					else if(brain_node == 2) //PZ
						return PM_PZ_LRange;
					else if(brain_node == 3) //T8
						return PM_T8_LRange;
					else if(brain_node == 4) //AF4
						return PM_AF4_LRange;
				}
				else{
					if(brain_node == 0) //AF3
						return MSP_AF3_LRange;
					else if(brain_node == 1) //T7
						return MSP_T7_LRange;
					else if(brain_node == 2) //PZ
						return MSP_PZ_LRange;
					else if(brain_node == 3) //T8
						return MSP_T8_LRange;
					else if(brain_node == 4) //AF4
						return MSP_AF4_LRange;
				}
			}

			function getColor(brainmap_val){
				var brainmap_color_val = [];
				for(var x = 0; x<brainmap_val.length; x++){
					var temp = 0;
					if(brainmap_val[x] > 0.5)
						temp = 380-(brainmap_val[x]*255);
					else
						temp = 125+(brainmap_val[x]*255);
					temp = Math.round(temp);

					var r = 0;
					var g = 0;
					var b = 0;

					//compute for r
					if(brainmap_val[x] > 1)
						r = 255
					else if(brainmap_val[x] < 0)
						r = 0;
					else if(brainmap_val[x] > 0.5)
						r = 255;
					else
						r = temp;
					
					//compute for g
					if(brainmap_val[x] > 1)
						g = 0
					else if(brainmap_val[x] < 0)
						g = 64;
					else if(brainmap_val[x] > 0.5)
						g = temp;
					else
						g = 255;

					//compute for b
					if(brainmap_val[x] > 1)
						b = 191
					else if(brainmap_val[x] < 0)
						b = 255;
					else
						b = 0;
					brainmap_color_val.push("rgb(" + r + "," + g + "," + b + ")");
				}
				return brainmap_color_val;
			}

			function getNormVal(curr_brain_val, lRange, uRange){
				return (curr_brain_val - lRange)/(uRange - lRange);
			}

			function getBrainVal(col, lRange, uRange){
				//get val from db
				return curr_brain_val = curr_Lines[curr_row][col];
			}

			function setColor(brainmap_color_val){
				//alpha
				document.getElementById("A_AF3_channel").style.backgroundColor = brainmap_color_val[0];
				document.getElementById("A_T7_channel").style.backgroundColor = brainmap_color_val[1];
				document.getElementById("A_PZ_channel").style.backgroundColor = brainmap_color_val[2];
				document.getElementById("A_T8_channel").style.backgroundColor = brainmap_color_val[3];
				document.getElementById("A_AF4_channel").style.backgroundColor = brainmap_color_val[4];

				//bl
				document.getElementById("BL_AF3_channel").style.backgroundColor = brainmap_color_val[5];
				document.getElementById("BL_T7_channel").style.backgroundColor = brainmap_color_val[6];
				document.getElementById("BL_PZ_channel").style.backgroundColor = brainmap_color_val[7];
				document.getElementById("BL_T8_channel").style.backgroundColor = brainmap_color_val[8];
				document.getElementById("BL_AF4_channel").style.backgroundColor = brainmap_color_val[9];

				//BH
				document.getElementById("BH_AF3_channel").style.backgroundColor = brainmap_color_val[10];
				document.getElementById("BH_T7_channel").style.backgroundColor = brainmap_color_val[11];
				document.getElementById("BH_PZ_channel").style.backgroundColor = brainmap_color_val[12];
				document.getElementById("BH_T8_channel").style.backgroundColor = brainmap_color_val[13];
				document.getElementById("BH_AF4_channel").style.backgroundColor = brainmap_color_val[14];

				//G
				document.getElementById("G_AF3_channel").style.backgroundColor = brainmap_color_val[15];
				document.getElementById("G_T7_channel").style.backgroundColor = brainmap_color_val[16];
				document.getElementById("G_PZ_channel").style.backgroundColor = brainmap_color_val[17];
				document.getElementById("G_T8_channel").style.backgroundColor = brainmap_color_val[18];
				document.getElementById("G_AF4_channel").style.backgroundColor = brainmap_color_val[19];
			}

			function setBrainMap(){
				var brainmap_val = []; //A, BL, BH, GA 
				var brainmap_color_val = [];

				if(isPM()){
					var curr_brain_node = 0;
					for(var x = 0; x<40; x+=2){ //loop through table 
						var curr_brain_val = getBrainVal(x, getLRange(curr_brain_node), getURange(curr_brain_node));
						var curr_norm_val = getNormVal(curr_brain_val, getLRange(curr_brain_node), getURange(curr_brain_node));
						brainmap_val.push(curr_norm_val);
						if(curr_brain_node >= 4)
							curr_brain_node = 0;
						else
							curr_brain_node++;
					}
				}
				else{
					var curr_brain_node = 0;
					for(var x = 1; x<40; x+=2){ //loop through table 
						var curr_brain_val = getBrainVal(x, getLRange(curr_brain_node), getURange(curr_brain_node));
						var curr_norm_val = getNormVal(curr_brain_val, getLRange(curr_brain_node), getURange(curr_brain_node));
						brainmap_val.push(curr_norm_val);
						if(curr_brain_node >= 4)
							curr_brain_node = 0;
						else
							curr_brain_node++;
					}
				}
				brainmap_color_val = getColor(brainmap_val);
				setColor(brainmap_color_val);
				document.getElementById("row_num").innerHTML = curr_row;
			}

			function filterBasedOnEmotion(){
				var curr_col = 0;
				if(curr_Emotion == 0 || curr_Emotion == 3)
					curr_col = 49; //interest
				else if(curr_Emotion == 1 || curr_Emotion == 4)
					curr_col = 50; //frustration
				else
					curr_col = 51; //stress
				for(var x = 0; x<lines.length; x++){
					if(lines[x][curr_col] == 1)	//1  == 'HIGH'
		    			curr_Lines.push(lines[x]);
		    	}
			}

			function buttonsBasedOnEmotion(){
				//disable button if curr_Lines is 0
				var test = []

				//Check interest
				curr_col = 49; 
				test = getLinesBasedOnEmotion(49);
				if(test  === undefined ||test.length == 0){
					document.getElementById("pm_int").disabled = true;
					document.getElementById("msp_int").disabled = true;
				}

				test = []

				//Check frustration
				curr_col = 50; 
				test = getLinesBasedOnEmotion(50);
				if(test  === undefined ||test.length == 0){
					document.getElementById("pm_frus").disabled = true;
					document.getElementById("msp_frus").disabled = true;
				}

				test = [];

				//Check stress
				curr_col = 50; 
				test = getLinesBasedOnEmotion(51);
				if(test  === undefined ||test.length == 0){
					document.getElementById("pm_stress").disabled = true;
					document.getElementById("msp_stress").disabled = true;
				}
			}

			function getLinesBasedOnEmotion(curr_col){
				var test = [];
				for(var x = 0; x<lines.length; x++){
					if(lines[x][curr_col] == 1)	//1  == 'HIGH'
		    			test.push(lines[x]);
		    	}
		    	return test;
			}


			/************* FIRST SET *************/
			function setUp(){
				curr_Lines = [];
				curr_row = 0;
				filterBasedOnEmotion();
				setBrainMap(); //PM Interest
				enableButtons();
				setEmotionScreen();
			}

			function setEmotionScreen(){
				enablePrevNextButtons();
				if(curr_Emotion == 0){
					document.getElementById("currState").innerHTML = "PM Interest";
					document.getElementById("pm_int").disabled = true;
				}
				else if(curr_Emotion == 1){
					document.getElementById("currState").innerHTML = "PM Frustration";
					document.getElementById("pm_frus").disabled = true;
				}
				else if(curr_Emotion == 2){
					document.getElementById("currState").innerHTML = "PM Stress";
					document.getElementById("pm_stress").disabled = true;
				}
				else if(curr_Emotion == 3){
					document.getElementById("currState").innerHTML = "MSP Interest";
					document.getElementById("msp_int").disabled = true;
				}
				else if(curr_Emotion == 4){
					document.getElementById("currState").innerHTML = "MSP Frustration";
					document.getElementById("msp_frus").disabled = true;
				}
				else if(curr_Emotion == 5){
					document.getElementById("currState").innerHTML = "MSP Stress";
					document.getElementById("msp_stress").disabled = true;
				}
			}

			/************* FILE READER *************/
			function handleFiles(files) {
				lines = [];
		      // Check for the various File API support.
		      if (window.FileReader) {
		          // FileReader are supported.
		          getAsText(files[0]);
		      } else {
		          alert('FileReader are not supported in this browser.');
		      }
		    }

		    function getAsText(fileToRead) {
		      var reader = new FileReader();
		      // Read file into memory as UTF-8      
		      reader.readAsText(fileToRead);
		      // Handle errors load
		      reader.onload = loadHandler;
		      reader.onerror = errorHandler;
		    }

		    function loadHandler(event) {
		      var csv = event.target.result;
		      processData(csv);
		    }

		    function getAverage(n, lines){
		    	var sum = 0;
		    	for(var x = 0; x<lines.length; x++){
		    		sum+=lines[x][n];
		    	}
		    	return sum/lines.length;
		    }

		    function processData(csv) {
		        var allTextLines = csv.split(/\r\n|\n/);
		        for (var i=0; i<allTextLines.length; i++) {
		            var data = allTextLines[i].split(';');
		                var tarr = [];
		                for (var j=0; j<data.length; j++) {
		                    var str = data[j];
		                    var res = str.split(",");
		                    for (var k = 0; k<res.length; k++)
		                    	tarr.push(parseFloat(res[k]));
		                }
		                lines.push(tarr);
		        }
		      	setUp();
		    }

		    function prev(){
		    	if(curr_row > 0){
		    		curr_row--;
		    		setBrainMap();
		    	}
		    	enablePrevNextButtons();
		    }

		    function next(){
		    	if(curr_row < curr_Lines.length){
		    		curr_row++;
		    		setBrainMap();
		    	}
		    	enablePrevNextButtons();
		    }
		    
		    function errorHandler(evt) {
		      if(evt.target.error.name == "NotReadableError") {
		          alert("Cannot read file !");
		      }
		    }		

		    function setcurr_Emotion(x){
		    	curr_Emotion = x;
		    	curr_row = 0;
		    	setUp();
		    }

			function loadFirst(){
				document.getElementById("pm_int").disabled = true;
				document.getElementById("pm_frus").disabled = true;
				document.getElementById("pm_stress").disabled = true;

				document.getElementById("msp_int").disabled = true;
				document.getElementById("msp_frus").disabled = true;
				document.getElementById("msp_stress").disabled = true;

				document.getElementById("prev").disabled = true;
				document.getElementById("next").disabled = true;

				setLURangeTB();
			}

			function enableButtons(){
				enableAllEmotionButtons();
				buttonsBasedOnEmotion();
			}

			function enableAllEmotionButtons(){
				document.getElementById("pm_int").disabled = false;
				document.getElementById("pm_frus").disabled = false;
				document.getElementById("pm_stress").disabled = false;

				document.getElementById("msp_int").disabled = false;
				document.getElementById("msp_frus").disabled = false;
				document.getElementById("msp_stress").disabled = false;
			}

			function enablePrevNextButtons(){
				if(curr_row == 0)
					document.getElementById("prev").disabled = true;
				else
					document.getElementById("prev").disabled = false;

				if(curr_row == curr_Lines.length-1)
		    		document.getElementById("next").disabled = true;
		    	else
					document.getElementById("next").disabled = false;
			}

			function setLURangeTB(){
				document.getElementById("PM_AF3_LRange").value = PM_AF3_LRange;
				document.getElementById("PM_AF3_URange").value = PM_AF3_URange;
				document.getElementById("PM_T7_LRange").value = PM_T7_LRange;
				document.getElementById("PM_T7_URange").value = PM_T7_URange;
				document.getElementById("PM_PZ_LRange").value = PM_PZ_LRange;
				document.getElementById("PM_PZ_URange").value = PM_PZ_URange;
				document.getElementById("PM_T8_LRange").value = PM_T8_LRange;
				document.getElementById("PM_T8_URange").value = PM_T8_URange;
				document.getElementById("PM_AF4_LRange").value = PM_AF4_LRange;
				document.getElementById("PM_AF4_URange").value = PM_AF4_URange;

				document.getElementById("MSP_AF3_LRange").value = MSP_AF3_LRange;
				document.getElementById("MSP_AF3_URange").value = MSP_AF3_URange;
				document.getElementById("MSP_T7_LRange").value = MSP_T7_LRange;
				document.getElementById("MSP_T7_URange").value = MSP_T7_URange;
				document.getElementById("MSP_PZ_LRange").value = MSP_PZ_LRange;
				document.getElementById("MSP_PZ_URange").value = MSP_PZ_URange;
				document.getElementById("MSP_T8_LRange").value = MSP_T8_LRange;
				document.getElementById("MSP_T8_URange").value = MSP_T8_URange;
				document.getElementById("MSP_AF4_LRange").value = MSP_AF4_LRange;
				document.getElementById("MSP_AF4_URange").value = MSP_AF4_URange;
			}

			function getLURangeTB(){
				if(parseFloat(document.getElementById("PM_AF3_LRange").value) < parseFloat(document.getElementById("PM_AF3_URange").value) &&
					parseFloat(document.getElementById("PM_T7_LRange").value) < parseFloat(document.getElementById("PM_T7_URange").value) &&
					parseFloat(document.getElementById("PM_PZ_LRange").value) < parseFloat(document.getElementById("PM_PZ_URange").value) &&
					parseFloat(document.getElementById("PM_T8_LRange").value) < parseFloat(document.getElementById("PM_T8_URange").value) && 
					parseFloat(document.getElementById("PM_AF4_LRange").value) < parseFloat(document.getElementById("PM_AF4_URange").value) &&

					parseFloat(document.getElementById("MSP_AF3_LRange").value) < parseFloat(document.getElementById("MSP_AF3_URange").value) &&
					parseFloat(document.getElementById("MSP_T7_LRange").value) < parseFloat(document.getElementById("MSP_T7_URange").value) &&
					parseFloat(document.getElementById("MSP_PZ_LRange").value) < parseFloat(document.getElementById("MSP_PZ_URange").value) &&
					parseFloat(document.getElementById("MSP_T8_LRange").value) < parseFloat(document.getElementById("MSP_T8_URange").value) && 
					parseFloat(document.getElementById("MSP_AF4_LRange").value) < parseFloat(document.getElementById("MSP_AF4_URange").value)){

					PM_AF3_LRange = parseFloat(document.getElementById("PM_AF3_LRange").value);
					PM_AF3_URange = parseFloat(document.getElementById("PM_AF3_URange").value);
					PM_T7_LRange = parseFloat(document.getElementById("PM_T7_LRange").value);
					PM_T7_URange = parseFloat(document.getElementById("PM_T7_URange").value);
					PM_PZ_LRange = parseFloat(document.getElementById("PM_PZ_LRange").value);
					PM_PZ_URange = parseFloat(document.getElementById("PM_PZ_URange").value);
					PM_T8_LRange = parseFloat(document.getElementById("PM_T8_LRange").value);
					PM_T8_URange = parseFloat(document.getElementById("PM_T8_URange").value);
					PM_AF4_LRange = parseFloat(document.getElementById("PM_AF4_LRange").value);
					PM_AF4_URange = parseFloat(document.getElementById("PM_AF4_URange").value);

					MSP_AF3_LRange = parseFloat(document.getElementById("MSP_AF3_LRange").value);
					MSP_AF3_URange = parseFloat(document.getElementById("MSP_AF3_URange").value);
					MSP_T7_LRange = parseFloat(document.getElementById("MSP_T7_LRange").value);
					MSP_T7_URange = parseFloat(document.getElementById("MSP_T7_URange").value);
					MSP_PZ_LRange = parseFloat(document.getElementById("MSP_PZ_LRange").value);
					MSP_PZ_URange = parseFloat(document.getElementById("MSP_PZ_URange").value);
					MSP_T8_LRange = parseFloat(document.getElementById("MSP_T8_LRange").value);
					MSP_T8_URange = parseFloat(document.getElementById("MSP_T8_URange").value);
					MSP_AF4_LRange = parseFloat(document.getElementById("MSP_AF4_LRange").value);
					MSP_AF4_URange = parseFloat(document.getElementById("MSP_AF4_URange").value);
					
					setUp();
				}
				else
					alert("LRange should be < URange");
			}			
		    </script>
	</body>

</html>